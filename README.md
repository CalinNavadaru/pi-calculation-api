# PI Calculation API Server

A simple docker compose server which exposes a django-webserver that lets you compute PI with a 
given precision (in decimals) in an asynchronous manner.

--- 

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Installation](#installation)
3. [Configuration](#configuration)
4. [Usage](#usage)
6. [License](#license)
7. [Notes](#notes)

---

## Prerequisites

* docker compose
* git

---

## Installation

Run in a shell:
```bash
git clone git@github.com:CalinNavadaru/pi-calculation-api.git
```
or
```bash
git clone https://github.com/CalinNavadaru/pi-calculation-api.git
```
in your desired location.

Then, change the current directory and run:
```bash
cd pi-calculation-api
python -m venv ./path-to-new-venv
source ./path-to-new-venv
pip install -r requirements.txt
```

---

## Configuration

The environment file can be found at:
  - \<root\>/.env_template

This file must be copied and renamed to .env for the compose project to work.

Next, each value will be presented and will be explaining what to assign.

Environment variables:
1. CELERY_BROKER_URL: This is the redis db used for sending the tasks to celery. Example: redis://redis:6379/0
2. CELERY_RESULT_BACKEND: This is the redis db used for sending the results back. Example: redis://redis:6379/1
<br>
It must be different that the one provided for .1.
3. CACHE: Another redis db that will store the cached results. Example: redis://redis:6379/2.<br>
It must be different to the values provided for .1 and .2.
4. GATEWAY_IP: A valid gateway ip. It can be set and obtained through the creation of a docker network, by setting the subnetwork and mask.
Example: 172.25.0.1 (172.25.0.0/24).
5. SECRET: It is a value used by django. It can be generated by using:
```python
from django.core.management.utils import get_random_secret_key  
print(get_random_secret_key())
```
---

## Usage

To use this, run the followings command:
```bash
docker compose up -d
```

Then access the following endpoints: 
- http://127.0.0.1:8000/calculate_pi/?n=<value\>&method=\<wallis\|gauss\|madhava_leibniz\> (for computing PI using \<method\> up to \<value\> decimals)
- http://127.0.0.1:8000/check_progress/?task_id=<value\> (for checking the task assigned to the \<value> id).

--- 

## License

This project is licensed under the MIT License.


## Notes

This project is intended as a learning experience, showcasing my skills in Python, Docker, Celery 
and my general knowledge of backend development in Django/DRF.

Under no circumstances should this project be used in a production environment without a code review and additional
security measures.